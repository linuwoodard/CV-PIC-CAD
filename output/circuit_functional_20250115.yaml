name: mzi_perfect_alignment

instances:
  mzi_1:
    component: mzi_no_heater
    settings: 
      arm_spacing: 40.0

  tapered_input_coupler_1: # TL (Top Left)
    component: tapered_input_coupler
    settings: {}
  
  tapered_input_coupler_2: # BL (Bottom Left)
    component: tapered_input_coupler
    settings: {}

  tapered_input_coupler_3: # BR (Bottom Right)
    component: tapered_input_coupler
    settings: {}

  tapered_input_coupler_4: # TR (Top Right)
    component: tapered_input_coupler
    settings: {}

placements:
  # ANCHOR: MZI at absolute position (0, 0)
  mzi_1:
    x: 0
    y: 0
    rotation: 0

  # RELATIVE: Tapers connect to MZI ports with offsets
  # --- LEFT SIDE (Inputs) ---
  tapered_input_coupler_1: # Top Left
    to: mzi_1,o2
    port: o2
    dx: -500
    dy: 0
    rotation: 0

  tapered_input_coupler_2: # Bottom Left
    to: mzi_1,o1
    port: o2
    dx: -500
    dy: 0
    rotation: 0

  # --- RIGHT SIDE (Outputs) ---
  tapered_input_coupler_3: # Bottom Right
    to: mzi_1,o3
    port: o2
    dx: 0
    dy: 0
    rotation: 0

  tapered_input_coupler_4: # Top Right
    to: mzi_1,o4
    port: o2
    dx: 0
    dy: 0
    rotation: 0

routes:
  route_1_TL:
    links:
      tapered_input_coupler_1,o2: mzi_1,o2
    settings:
      cross_section: strip_1p2

  route_2_BL:
    links:
      tapered_input_coupler_2,o2: mzi_1,o1
    settings:
      cross_section: strip_1p2

  route_3_BR:
    links:
      mzi_1,o3: tapered_input_coupler_3,o2
    settings:
      cross_section: strip_1p2

  route_4_TR:
    links:
      mzi_1,o4: tapered_input_coupler_4,o2
    settings:
      cross_section: strip_1p2

