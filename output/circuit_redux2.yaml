name: mzi_perfect_alignment

instances:
  mzi_1:
    component: mzi_no_heater
    settings: 
      arm_spacing: 40.0

  tapered_input_coupler_1: # TL
    component: tapered_input_coupler
    settings: {}
  
  tapered_input_coupler_2: # BL
    component: tapered_input_coupler
    settings: {}

  tapered_input_coupler_3: # BR
    component: tapered_input_coupler
    settings: {}

  tapered_input_coupler_4: # TR
    component: tapered_input_coupler
    settings: {}

placements:
  mzi_1:
    x: 0
    y: 0
    rotation: 0

  # --- LEFT SIDE (Inputs) ---
  tapered_input_coupler_1: # Top Left
    port: o2
    x: mzi_1,o2
    y: mzi_1,o2
    dx: -500
    rotation: 0

  tapered_input_coupler_2: # Bottom Left
    port: o2
    x: mzi_1,o1
    y: mzi_1,o1
    dx: -500
    rotation: 0

  # --- RIGHT SIDE (Outputs) ---
  tapered_input_coupler_3: # Bottom Right
    port: o2
    x: mzi_1,o3
    y: mzi_1,o3
    dx: 500
    rotation: 180

  tapered_input_coupler_4: # Top Right
    port: o2
    x: mzi_1,o4
    y: mzi_1,o4
    dx: 500
    rotation: 180

routes:
  route_1_TL:
    links:
      tapered_input_coupler_1,o2: mzi_1,o2
    settings:
      cross_section: strip_1p2 # <--- This now works because Python registered it

  route_2_BL:
    links:
      tapered_input_coupler_2,o2: mzi_1,o1
    settings:
      cross_section: strip_1p2

  route_3_BR:
    links:
      tapered_input_coupler_3,o2: mzi_1,o3
    settings:
      cross_section: strip_1p2

  route_4_TR:
    links:
      tapered_input_coupler_4,o2: mzi_1,o4
    settings:
      cross_section: strip_1p2