  name: loopback_mirror_grating_couplers

  instances:
    mzi_1:
      component: mzi_no_heater
      settings: 
        arm_spacing: 200.0
        mzi_arm_length: 1000.0

    grating_coupler_1: # Bottom Left
      component: focusing_grating_coupler
      settings: {}
    
    grating_coupler_2: # Top Left
      component: focusing_grating_coupler
      settings: {}
    
    euler_bend_1: # Euler Bend connecting o3 and o4
      component: euler_bend
      settings: 
        radius: 91.7
        angle: 180.0
        

  placements:
    # ANCHOR: MZI at absolute position (0, 0)
    mzi_1:
      x: 0
      y: 0
      rotation: 0

    # RELATIVE: Tapers connect to MZI ports with offsets
    # --- LEFT SIDE (Inputs) ---
    grating_coupler_1: # Bottom Left
      to: mzi_1,o1
      port: o1
      dx: 0
      dy: 0
      rotation: 0

    grating_coupler_2: # Top Left
      to: mzi_1,o2
      port: o1
      dx: 0
      dy: 0
      rotation: 0

    euler_bend_1: # Bottom Right
      to: mzi_1,o3
      port: o1
      dx: 0
      dy: 0
      rotation: 0


  routes:
    route_1_input_1:
      links:
        grating_coupler_1,o1: mzi_1,o1
      settings:
        cross_section: strip_1p2

    route_2_input_2:
      links:
        grating_coupler_2,o1: mzi_1,o2
      settings:
        cross_section: strip_1p2
    route_3_loopback:
      links:
        mzi_1,o3: euler_bend_1,o1
      settings:
        cross_section: strip_1p2
